<?phpsession_start();$feeder = json_decode($widget_parameters["feeder"], TRUE);$feeder_id = $feeder["feederId"];if (!$feeder_id) {  return;}$feeder_obj = webroot\WidgetsManagement::get_widget_feeder($feeder_id);if ($feeder_obj->feeder_type !== "list") {  //echo "<p>Feeder type is invalid. Need a list feeder type</p>";  return;}$item_id = $feeder["id"];if ($widget_parameters["default-content"] == "yes") {  if ($_REQUEST["_page"]) {    $feeder_id = $_REQUEST["_page"];  }}$token = $_REQUEST["$feeder_id-token"];$num_of_items_per_page = 10;if (isset($widget_parameters["items-count"])) {  $num_of_items_per_page = intval($widget_parameters["items-count"]);}$order = null;if ($widget_parameters["order"] !== " default") {  $order = $widget_parameters["order"];}if (!$token) {  $token = 0;}$row_num = ($token * $num_of_items_per_page) + $num_of_items_per_page;//$feeder_obj = webroot\WidgetsManagement::get_widget_feeder($feeder_id);$items_list = EWCore::call_api($feeder_obj->api_url, [            "id"        => $item_id,            "token"     => $token * $num_of_items_per_page,            "size"      => $num_of_items_per_page,            "order_by"  => $order,            '_language' => $_REQUEST['_language']        ]);$items_count = $items_list["totalRows"];$items = $items_list["data"];$page = parse_url($_SERVER["REQUEST_URI"], PHP_URL_PATH);if ($widget_parameters["content_fields"]) {  $fields = $widget_parameters["content_fields"];  if (is_string($fields)) {    $fields = [$fields];  }  foreach ($items as $i => $item) {    $items[$i]['html'] = '';    foreach ($fields as $field) {      $tag = $item['content_fields'][$field]['tag'];      if (isset($tag)) {        $field_data = $page_data['content_fields'][$field];        if ($tag === 'img') {          $page_content .= "<img class='$field' src='{$field_data['src']}'/>";        }        else {          $items[$i]['html'] .= "<$tag class='$field'>{$field_data['content']}</$tag>";        }      }    }  }}if ($items_list["header"]) {  echo $items_list["header"];}if ($widget_parameters["show_top_buttons"]) {  $list_header_html = "<div class='row list-header'><div class='col-xs-12'>";  $list_header_html .= ($token > 0) ? "<a href='$page?$feeder_id-token=" . ($token - 1) . " class='btn btn-link btn-perv'>{Pervious}</a>" : "";  $list_header_html .= ($row_num < $items_count) ? "<a href='$page?$feeder_id-token=" . ($token + 1) . " class='btn btn-link btn-perv'>tr{Next}</a>" : "";  $list_header_html .= "</div></div>";  echo $list_header_html;}?><div class="row list-content">  <?php  $index = 1;  if (isset($items)) {    $list_items_html = "";    if ($widget_parameters["hide_see_more"]) {      foreach ($items as $item) {        $list_items_html .= "<div class='list-item col-xs-{$widget_parameters["col-xs-"]} col-sm-{$widget_parameters["col-sm-"]} col-md-{$widget_parameters["col-md-"]} col-lg-{$widget_parameters["col-lg-"]} {$item["class"]}' style='{$item["style"]}'>"                . "<div class='list-item-cell'>{$item["html"]}"                . "</div></div>";      }    }    else {      foreach ($items as $item) {        $list_items_html .= "<div class='list-item col-xs-{$widget_parameters["col-xs-"]} col-sm-{$widget_parameters["col-sm-"]} col-md-{$widget_parameters["col-md-"]} col-lg-{$widget_parameters["col-lg-"]} {$item["class"]}' style='{$item["style"]}'>"                . "<div class='list-item-cell'>{$item["html"]}"                . "<a href='./article/{$item["id"]}'>See More</a>"                . "</div></div>";        $index++;      }    }    echo $list_items_html;  }  ?></div><?phpif ($widget_parameters["show_bottom_buttons"]) {  $bottom_buttons_html = "<div class='row list-footer'><div class='col-xs-12'>";  $bottom_buttons_html .=($token > 0) ? "<a href='$page?$feeder_id-token=" . ($token - 1) . " class='btn btn-link btn-perv'>{Pervious}</a>" : "";  $bottom_buttons_html .= ($row_num < $items_count) ? "<a href='$page?$feeder_id-token=" . ($token + 1) . " class='btn btn-link btn-perv'>tr{Next}</a>" : "";  $bottom_buttons_html .= "</div></div>";  echo $bottom_buttons_html;}