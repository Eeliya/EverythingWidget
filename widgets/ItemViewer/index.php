<?phpsession_start();global $EW;$widget_style_class .= "item-viewer";$feeder = json_decode($widget_parameters["feeder"], TRUE);$feeder_id = $feeder["feederName"];if ($widget_parameters["default-content"] == "yes"){  if ($_REQUEST["_page"])  {    $feeder_id = $_REQUEST["_page"];  }}$token = $_REQUEST["$feeder_id-token"];$num_of_items_per_page = 10;if (!$token)  $token = 0;if (!$feeder_id)  return;$row_num = ($token * $num_of_items_per_page) + $num_of_items_per_page;$items_list = EWCore::get_widget_feeder("items", $feeder_id, array($token * $num_of_items_per_page, $num_of_items_per_page));$items_list = json_decode($items_list, TRUE);$items_count = $items_list["num_rows"];$items = $items_list["items"];$page = parse_url($_SERVER["REQUEST_URI"], PHP_URL_PATH);//print_r($page_parameters);if ($items_list["header"])  echo $items_list["header"];//echo $num_of_items_per_page . " " . $row_num . " " . $items_count;?><div class="row">  <div class="col-xs-12">    <?php    if ($token > 0)    {      ?>      <a href="<?php echo "$page?$feeder_id-token=" . ($token - 1) ?>" class="btn btn-link btn-perv">Pervious</a>      <?php    }    if ($row_num < $items_count)    {      ?>      <a href="<?php echo "$page?$feeder_id-token=" . ($token + 1) ?>" class="btn btn-link btn-next pull-right">Next</a>      <?php    }    ?>  </div></div><div id="<?php echo $widget_id . "-item-viewer" ?>" class="row">  <?php  foreach ($items as $item)  {    ?>    <div class="item-viewer item <?php echo $item["class"] ?>" style="<?php echo $item["style"] ?>">      <?php echo $item["html"] ?>    </div>    <?php  }  ?></div><div class="row">  <div class="col-xs-12">    <?php    if ($token > 0)    {      ?>      <a href="<?php echo "$page?$feeder_id-token=" . ($token - 1) ?>" class="btn btn-link btn-perv">Pervious</a>      <?php    }    if ($row_num < $items_count)    {      ?>      <a href="<?php echo "$page?$feeder_id-token=" . ($token + 1) ?>" class="btn btn-link btn-next pull-right">Next</a>      <?php    }    ?>  </div></div><script >  $(document).ready(function() {    /*var msnry = new Masonry('#<?php echo $widget_id . "-item-viewer" ?>', {     // options          itemSelector: '.item'     });*/    var columnsCount = 3;    var columns = {};    for (var i = 0; i < columnsCount; i++)    {      columns[i] = $("<div class='col-lg-4 col-md-4 col-sm-6 col-xs-12 column'></div>");      // alert(columns[i]);    }    var ci = 0;    $.each($('#<?php echo $widget_id . "-item-viewer" ?>').children(".item"), function(index, element) {      var $element = $(element);      //alert($element.html());      // alert(columns[ci]);      (columns[ci++]).append($element);      //ci++;      if (ci >= columnsCount)        ci = 0;    });    for (var i = 0; i < columnsCount; i++)    {      $('#<?php echo $widget_id . "-item-viewer" ?>').append(columns[i]);      // alert(columns[i]);    }      });</script>