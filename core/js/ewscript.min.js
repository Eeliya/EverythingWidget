function EverythingWidgets(){var t=this;this.urlHandlers=new Array,this.mainContent=$("#main-content"),this.currentTab=null,this.widget_data=[],this.activityCounter=[],$("#components-pane").hide();var e="";$(document).mousedown(function(e){t.activeElement=$(e.target)}),$(window).resize(function(){$(window).width()<768&&"xs"!==e?($(window).trigger("ew.screen.xs"),e="xs"):$(window).width()>=768&&$(window).width()<992&&"sm"!==e?($(window).trigger("ew.screen.sm"),e="sm"):$(window).width()>=992&&$(window).width()<1360&&"md"!==e?($(window).trigger("ew.screen.md"),e="md"):$(window).width()>=1360&&"lg"!==e&&($(window).trigger("ew.screen.lg"),e="lg")}),this.customFunction=function(){}}function HashListener(t){this.name=t,this.handlers=new Array,this.oldHash="",this.hash="#",this.newHandler=!1,this.Check;var e=this,a=function(){(e.oldHash!==customHashes[t].hash||e.newHandler)&&(e.newHandler=!1,e.oldHash=customHashes[t].hash,$(window).trigger(t))};this.Check=setInterval(function(){a()},50),this.addHandler=function(t,a){for(var i=0;i<e.handlers.length;i++)if(" "+e.handlers[i]==" "+a)return $(window).off(t,null,e.handlers[i]),e.handlers[i]=null,e.handlers[i]=a,void $(window).on(t,a);e.handlers.push(a),$(window).on(t,a)}}function EWTable(t){var e=this;this.config=$.extend({pageSize:10,urlData:{}},t),this.container=$("<div class='report row'></div>"),this.tableHeaderDiv=$("<div class='table-header' ></div>"),this.tableBodyDiv=$("<div class='table-body'></div>"),this.tableContainer=$("<div class='table-container'></div>"),this.table,this.controls=$("<div class='controls'></div>"),this.dynamicHeader=$(),this.token=0,this.pageSize=this.config.pageSize,this.url=this.config.url,this.urlData=this.config.urlData,this.cmd,this.data=this.config.data,this.next,this.previous,this.pageInfo,this.tableContainer.append(this.tableHeaderDiv),this.tableContainer.append(this.tableBodyDiv),this.container.append(this.controls),this.container.append(this.tableContainer),this.tableHeaderDiv.css({position:"absolute",display:"none",zIndex:"2"}),this.tableBodyDiv.scroll(function(){$(this).scrollTop()>0&&!e.tableHeaderDiv.is(":visible")?(e.tableHeaderDiv.css("width",e.table.outerWidth()),$.each(e.headers.children(),function(t,a){$(a).css({width:e.dynamicHeader.children().eq(t).css("width")})}),e.tableHeaderDiv.show()):$(this).scrollTop()<=0&&e.tableHeaderDiv.is(":visible")&&e.tableHeaderDiv.stop().animate({height:"toggle"},200),e.tableHeaderDiv.css("left",e.table.position().left)}),$.data(e.tableHeaderDiv,"responsive")||(e.tableHeaderDiv.data("responsive",!0),$(window).resize(function(){e.tableHeaderDiv.css("width",e.table.outerWidth()),$.each(e.headers.children(),function(t,a){$(a).css({width:e.dynamicHeader.children().eq(t).css("width")})})}))}function hashHandler(){this.oldHash=window.location.hash,this.Check;var t=function(){if(this.oldHash!==window.location.hash||EW.newHandler){EW.Router.notifyRoutes(),EW.newHandler=!1,this.oldHash=window.location.hash;for(var t=0;t<EW.urlHandlers.length;t++)EW.urlHandlers[t].call()}};this.Check=setInterval(function(){t()},50)}function EWNotification(t,e){var a={status:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:2e4},delay:5e3,message:"Done Successfully",onClose:function(){},onClosed:function(){},position:"nw"};this.$element=$(t),this.$note=$('<div class="notification alert"></div>'),this.options=$.extend(!0,{},a,e),this.$note.css({position:"fixed",zIndex:9999}),this.$note.attr("data-alert","true"),this.$note.attr("data-position",this.options.position),"ne"==this.options.position&&this.$note.css("right","0px"),this.$note.addClass(this.options.status?"alert-"+this.options.status:"alert-success"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message?this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text&&this.$note.text(this.options.message.text):this.$note.html(this.options.message):this.$note.html(this.$element.data("message"));var i=this;if(this.options.closable)var n=$('<a class="close close-icon" href="#"></a>');return n.on("click",function(t){t.preventDefault(),i.closeNotification()}),this.$note.prepend(n),this}function EWFormValidator(t){var e=0,a=$(t),i=function(t,e,i){var n=t.val();switch(e){case"r":if(!n)return i.append("<li>This filed is required</li>"),!1;break;case"email":if(!n)return!1;var s=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!s.test(n))return i.append("<li>Invalid email address format</li>"),!1;break;case"url":if(n){var s=/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/;return s.test(n)||i.append("<li>Invalid URL address format</li>"),!1}}var o=e.match(/\[(\d*)-?(\d*)\]/);if(o){if(o[1]&&n.length<o[1])return i.append("<li>At least "+o[1]+" character</li>"),!1;if(o[2]&&n.length>o[2])return i.append("<li>Maximum length is "+o[2]+" character</li>"),!1}var r=e.match(/eq\[(.*)\]/);if(r){var l=a.find("#"+r[1]);if(n!=l.val())return i.append("<li>Value should be equal to the value of "+l.data("label")+" field</li>"),!1}return!0};a.find(".errors-list").remove();var n=a.find("input, textarea, select"),s=$();return $.each(n,function(t,a){var n=$(a);if(n.data("validate")){var o=n.data("validate").split(",");n.parent().attr("data-element-wrapper")||n.EW().putInWrapper();var r=n.parent();0==r.find(".errors-panel").length&&r.append("<ul class='errors-list'>"),s=n.parent().find(".errors-list");{$()}$.each(o,function(t,a){i(n,a,s)||e++})}}),e>0?($("body").EW().notify({status:"error",message:"You have errors in your from, Please check your data"}),!1):(s.remove(),!0)}function ExtendableList(t,e){var a=this;this.$element=$(t),this.settings=$.extend({value:[]},e),this.firstItemClone=this.$element.find("li:first-child").clone(),this.lastRow=$("<div data-add-item-row='true' class='row row-buttons'><div class='col-xs-12'></div></div>"),this.addNewRow=$("<button type='button' class='btn btn-text btn-primary pull-right'>Add</button>"),this.addNewRow.on("click",function(){var t=a.createItem();t.hide(),a.lastRow.before(t),t.fadeIn(200)}),this.lastRow.children().append(this.addNewRow),a.$element.empty();var i=!1,n=!1,s=new Array,o=null;o=a.createItem(),$.each(this.settings.value,function(t,e){if(o.find("input[name='"+t+"']").length>0&&("object"!=typeof e&&(n||(o=a.createItem(),n=!0,s.push(o)),o.find("input[name='"+t+"']").val(e).change()),!n))if(i)for(var r=0;r<e.length;r++)s[r].find(":input[name='"+t+"']").val(e[r]).change();else for(var r=0;r<e.length;r++)o=a.createItem(),o.find(":input[name='"+t+"']").val(e[r]).change(),s.push(o),i=!0}),a.$element.append(s),a.$element.append(this.lastRow),a.$element.sortable({handle:".handle"})}$.fn.serializeJSON=function(){var t={},e=this.serializeArray();return $.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),$.isEmptyObject(t)?null:JSON.stringify(t)};var customHashes=new Object;EverythingWidgets.prototype.showAllComponents=function(){var t=this;$("#components-pane").css({left:"-100%"}),$("#components-pane").stop().animate({left:"0px",display:"block"},500,"Power3.easeOut").addClass("in"),$("#base-pane").addClass("blur"),this.lock("body"," "),$(".glass-pane-lock").bind("click",function(){$("#components-pane").hasClass("in")&&($("#components-pane").stop().animate({left:-$("#components-pane").outerWidth(),display:"none"},500,"Power3.easeOut",function(){}).removeClass("in"),t.unlock("body"),$("#base-pane").removeClass("blur"),$(".glass-pane-lock").unbind("click"))})},EverythingWidgets.prototype.addListItem=function(t,e,a){var i=$(document.createElement("li")),n=$(document.createElement("a"));return n.addClass("button"),a&&i.css(a),n.attr("type","button"),n.text(t).click(e),i.append(n),$("#action-bar-items").append(i),i.data("a",n),i},EverythingWidgets.prototype.addAction=function(t,e,a,i){var n=($(document.createElement("li")),$("<button>"+t+"</button>"));n.attr("data-label",t),n.addClass("btn btn-primary"),"string"==typeof a&&(i=a),n.attr("type","button"),n.click(e);var s=$("#"+i);return 0!=s.length?s.append(n):$(".action-bar-items").last().append(n),"string"!=typeof a&&a?(n.css(a),n):n},EverythingWidgets.prototype.addNotification=function(t){var e=$(document.createElement("li")),a=$(document.createElement("label"));return t&&e.css(t),e.append(a),e.setText=function(t,i){t?(a.text(t),a.fadeIn(100)):a.animate({width:"toggle"},500,function(){a.attr({"class":""}),a.text(""),e.remove()}),i&&setTimeout(function(){e.setText("")},i)},$("#action-bar-items").append(e),e},EverythingWidgets.prototype.getActivity=function(t){var e=this,a={title:"",defaultClass:"btn-primary",activity:null};$.extend(a,t);var i=1;if(a.activity=a.activity.replace(/\//g,"."),!e.activities[a.activity])return console.log("activity does not exist: "+a.activity),null;var n=a.activity;e.activityCounter[a.activity]&&(i=e.activityCounter[a.activity],i++,n=a.activity+"-"+i),e.activityCounter[a.activity]=i,e.activities[n]=$.extend(!0,{},e.activities[a.activity]),e.activities[n].modalObject&&a.modal&&a.modal["class"]&&e.activities[n].modalObject.animate({className:"top-pane col-xs-12 "+a.modal["class"]},300),$.extend(e.activities[n],t);var s=function(t){var a={ew_activity:n};"function"==typeof t&&(t=t()),$.extend(a,t),e.activities[n].form?e.setHashParameters(a):e.setHashParameters(a,"FORMLESS_ACTIVITY")};return s},EverythingWidgets.prototype.addActivity=function(t){var e=this,a={title:"",defaultClass:"btn-primary",activity:null};$.extend(a,t);var i=e.getActivity(t);if(!i)return console.log("Undefined activity: "+a.activity),$();var n=$("<button>"+a.title+"</button>");n.attr("data-label",a.title).addClass("btn "+a.defaultClass+" "+a["class"]),n.attr("type","button"),n.click(function(){i(a.hash)}),n.data("activity",i);var s=$("#"+a.parent);return 0!==s.length?s.append(n):$(".action-bar-items").last().append(n),"string"!=typeof a.css&&a.css?(n.css(a.css),n):n},EverythingWidgets.prototype.getHashParameters=function(t){var e=window.location.hash;if(customHashes[t])e=customHashes[t].hash;else if(t)return{};-1!==e.indexOf("#")&&(e=e.substring(1));var a={},i=e.split("&");return $.each(i,function(t,e){var i=e.split("=");a[i[0]]=i[1]}),a},EverythingWidgets.prototype.setFormData=function(t,e,a){var i=$(t);if(e&&200!=e.statusCode&&e.message)return e.status="error",e.delay="stay",void $(t).EW().notify(e).show();var n=function(t,e,i){if(a)i.find("[id='"+t+"']").val(a(t,e));else{var n=$();try{n=i.find(" :input[name='"+t+"'][value='"+e+"']")}catch(s){}0===n.length&&(n=i.find(":input[name='"+t+"']")),0===n.length?n=i.find("#"+t):(n.is(":radio")||n.is(":checkbox"))&&(n.is(":checked")||(n.click(),n.prop("checked",!0))),n.is("img")?(n.prop("src",e),n.attr("data-file-extension",/[^.]+$/.exec(e)),n.attr("data-filename",/^[^.]+/.exec(e))):n.is(":input")?n.val(e).change():n.text(e)}};return e?($.each(e,function(t,e){"object"==typeof e&&e?$.each(e,function(t,e){n(t,e,i)}):n(t,e,i)}),i.data("form-data",e),void i.trigger("refresh",[e])):($.each($(t+" input[id],"+t+" label[id],"+t+" select[id],"+t+" textarea[id]"),function(t){var e=$(t);e.is(":radio")||e.is(":checkbox")?e.is(":checked")&&(e.click(),e.prop("checked",!1)):e.is("input")||e.is("select")||e.is("textarea")?e.val("").change():e.is("img")?(e.prop("src",""),e.attr("data-file-extension",""),e.attr("data-filename","")):e.text("")}),i.data("form-data",{}),void i.trigger("refresh",[{}]))},EverythingWidgets.prototype.getParentDialog=function(t){var e=t.closest(".top-pane");return e},EverythingWidgets.prototype.createDropMenu=function(t,e){var a=$(t),i=$.extend({width:"400px",parent:"body",eventParent:$(window)},e),n=$("<div class='dropdown-menu'><div class='col-xs-12'></div></div>");n.css({width:i.width,height:"500px",overflow:"auto",overflowX:"hidden"});var s=!1,o=function(){s&&(n.detach(),s=!1)},r=function(t){t.preventDefault();var e=$(i.parent);$(i.eventParent).one("mousedown",o);var a=e.offset().top+t.pageY;a+500>$(window).height()&&(a=$(window).height()-504),n.css({left:e.offset().left+t.pageX,top:a,display:"none"}),$("body").append(n),n.animate({height:"toggle"},200,"Power3.easeOut"),s=!0};return $(a).on("contextmenu",r),i.button&&i.button.on("click",r),n},EverythingWidgets.prototype.createModal=function(t,e){var a,i,n=this,s=$("<div class='s-to-d-scale-anim'>"),o={setCloseButton:function(){var t=$("#base-pane").outerWidth()-l.outerWidth();0>t&&(t=0),i.css({left:l.offset().left+l.width()-10,top:parseInt(l.css("top"))+10,zIndex:l.css("z-index")}),i.show()},html:function(){}},r={"class":"center",initElement:!0,beforeClose:function(){return!0},autoOpen:!0};"object"==typeof t?(t.hash&&(r.closeAction="hash",r.autoOpen=!1),$.extend(r,t)):r={onClose:t,closeAction:e,autoOpen:!0,initElement:!0,"class":"center"},this.isOpen=!1;var l=$(document.createElement("div"));l.addClass("top-pane col-xs-12").addClass(r["class"]),i=$("<a class='close-button x-icon'>"),i.css({position:"absolute",display:"none"}),i.click(function(){l.trigger("close")}),$(window).resize(function(){o.setCloseButton()}),l.on("beforeClose",function(){return!0}),l.on("destroy",function(){r.closeAction=null,l.isOpen=!0,a=null,l.trigger("close")}),l.on("close",function(){if(l.triggerHandler("beforeClose")&&l.isOpen){var t=l.offset();if(s.css({width:l.outerWidth(),height:l.outerHeight(),top:t.top,left:t.left,position:"absolute",zIndex:l.css("z-index")}),l.before(s),"full"!==r["class"]&&n.unlock($("body")),"hide"===r.closeAction?(l.hide(),i.detach()):"hash"===r.closeAction?(l.detach(),i.detach()):(l.remove(),i.remove()),r.onClose&&r.onClose.apply(l,null),l.isOpen=!1,a&&$.contains(document,a[0])){var e=a.offset();s.css("textShadow",""),s.animate({top:e.top,left:e.left,width:a.outerWidth(),height:a.outerHeight(),lineHeight:a.outerHeight()+"px",fontSize:a.css("fontSize"),borderRadius:a.css("border-radius")},360,"Power2.easeOut",function(){a.css("visibility",""),s.fadeOut(120,function(){s.remove()})})}else s.text(""),s.delay(30).animate({top:"+=5%",left:"+=5%",width:"-=10%",height:"-=10%",opacity:0},360,"Power1.easeOut",function(){a&&a.css("visibility",""),s.remove()})}}),l.on("open",function(){if(!l.isOpen){if("full"!==r["class"]&&n.lock($("body")," "),l.show().css({opacity:"0"}),$.contains(document.body,l)||(i.hide(),$("body").append(l,i)),a=n.activeElement,r.initElement&&a&&0!==a.parent().length){a.is("p,h1,h2,h3,h4,h5,h6,span")&&(a=a.parent()),a.css("visibility","hidden");var t=a.css("backgroundColor");a.is("tr")&&(t="#78909C");var e=a.data("label"),c=a.offset();t="rgba(0, 0, 0, 0)"==t||"transparent"==t?"#aaa":t,s.css({overflow:"hidden",whiteSpace:"nowrap",color:"#fff",textAlign:"center",lineHeight:a.outerHeight(),fontWeight:"300",fontSize:a.css("font-size"),top:c.top,left:c.left,position:"absolute",backgroundColor:t,zIndex:l.css("z-index"),width:a.outerWidth(),height:a.outerHeight()}),s.text(e),l.before(s);var d=l.offset();s.animate({top:d.top,left:d.left,width:l.outerWidth(),height:l.outerHeight(),lineHeight:l.outerHeight()+"px",fontSize:"4em"},460,"Power3.easeInOut",function(){l.isOpen=!0,l.delay(e?120:0).animate({opacity:"1"},240,function(){o.setCloseButton(),s.remove(),"full"==r["class"]&&($("#header-pane").off("mouseenter.ew mouseleave.ew"),$("#header-pane").on("mouseleave.ew",function(){l.stop().animate({top:"10px",bottom:"0px"},200,"Power3,easeOut"),i.show()}),$("#header-pane").on("mouseenter.ew",function(){l.stop().animate({top:"45px",bottom:"-45px"},200,"Power3,easeOut"),i.hide()}))})})}else l.animate({left:"-=25%"},0),l.animate({opacity:"1",left:"+=25%"},520,"Power3.easeOut",function(){l.css("left",""),o.setCloseButton(),l.isOpen=!0,"full"===r["class"]&&($("#header-pane").off("mouseenter.ew mouseleave.ew"),$("#header-pane").on("mouseleave.ew",function(){l.stop().animate({top:"10px",bottom:"0px"},200,"Power3,easeOut"),i.show()}),$("#header-pane").on("mouseenter.ew",function(){l.stop().animate({top:"45px",bottom:"-45px"},200,"Power3,easeOut"),i.hide()}))});r.onOpen&&r.onOpen.apply(l,null)}}),l.dispose=function(){l.trigger("close")},l.open=function(){l.trigger("open")},r.hash&&n.addURLHandler(function(){l.trigger(n.getHashParameter(r.hash.key,r.hash.name)===r.hash.value?"open":"close")}),r.autoOpen&&l.trigger("open");var c=function(t){l.html=l.__proto__.html;var e=function(){return l.isOpen?(l.html(t),void(l.html=c)):void setTimeout(e,20)};e.call()};return l.html=c,l},EverythingWidgets.prototype.setWidgetParam=function(t,e,a){var i=$(t).val();i&&(i=$.parseJSON(i)),"object"!=typeof i&&(i=new Object),i[e]=a,$(t).val(JSON.stringify(i))},EverythingWidgets.prototype.getWidgetParam=function(t,e){var a=$(t).val();return a&&(a=$.parseJSON(a)),"object"!=typeof a?a[e]:null},JSON.stringify=JSON.stringify||function(t){var e=typeof t;if("object"!=e||null===t)return"string"==e&&(t='"'+t+'"'),String(t);var a,i,n=[],s=t&&t.constructor==Array;for(a in t)i=t[a],e=typeof i,"string"==e?i='"'+i+'"':"object"==e&&null!==i&&(i=JSON.stringify(i)),n.push((s?"":'"'+a+'":')+String(i));return(s?"[":"{")+String(n)+(s?"]":"}")},EverythingWidgets.prototype.setHashParameter=function(t,e,a){var i={};t&&(i[t]=e,this.setHashParameters(i,a))},EverythingWidgets.prototype.setHashParameters=function(t,e,a){this.lastHashParams=t;var i=window.location.hash;e&&(customHashes[e]?(this.removeURLHandler("",e),i=customHashes[e].hash):(customHashes[e]=new HashListener(e),i=customHashes[e].hash)),-1!==i.indexOf("#")&&(i=i.substring(1));var n=(i.split("&"),"#"),s=!1;i.replace(/([^&]*)=([^&]*)/g,function(e,i,o){null!=t[i]?(n+=i+"="+t[i],n+="&",s=!0,delete t[i]):t.hasOwnProperty(i)||a||(n+=i+"="+o,n+="&",s=!0)}),$.each(t,function(t,e){t&&e&&(n+=t+"="+e+"&",s=!0)}),e?customHashes[e].hash=n:window.location.hash=n},EverythingWidgets.prototype.getHashParameter=function(t,e){var a=window.location.hash;if(customHashes[e])a=customHashes[e].hash;else if(e)return null;-1!==a.indexOf("#")&&(a=a.substring(1));var i=a.split("&");for(var n in i){var s=i[n].match(/([^&]*)=([^&]*)/);if(s&&s[1]===t)return s[2]}return null},EverythingWidgets.prototype.Router={baseURL:"#",routers:[],routes:[],getInstance:function(t){var e=$.extend({},this);return e.baseURL=this.baseURL+t,e.routes=[],e},addRouter:function(t){this.routers.push(t)},on:function(t,e){for(var a=0;a<this.routes.length;a++)if(this.routes[a].url==t)return this.routes[a].callback=e,EW.newHandler=!0,null;EW.newHandler=!0,this.routes.push({url:t,callback:e})},notifyRoutes:function(){var t=this,e=window.location.hash;e=e||"/";for(var a=0;a<this.routes.length;a++)if("string"===$.type(this.routes[a].url)){var i=new RegExp("^"+this.baseURL+this.routes[a].url);if("/"==this.routes[a].url&&window.location.hash==this.baseURL+this.routes[a].url){e.replace(this.routes[a].url,this.routes[a].callback);continue}"/"!=this.routes[a].url&&i.test(e)&&e.replace(this.routes[a].url,function(){arguments=Array.prototype.slice.call(arguments,1);var e=t.getInstance(t.routes[a].url);t.routes[a].callback.apply(e,arguments),e.notifyRoutes()})}else"regexp"===$.type(this.routes[a].url)&&e.replace(this.routes[a].url,function(e){arguments=Array.prototype.slice.call(arguments,1);var i=t.getInstance(e);t.routes[a].callback.apply(i,arguments),i.notifyRoutes()})}},EverythingWidgets.prototype.loadMainContent=function(t){$.post(t,function(t){$("#main-content").html(t)})},EverythingWidgets.prototype.setCurrentTab=function(t){t&&t.parent().parent().find("a.selected").removeClass("selected"),t.addClass("selected"),this.currentTab=t},EverythingWidgets.prototype.lock=function(t,e){var a={"class":"",text:""},i=$(document.createElement("div"));return i.addClass("glass-pane-lock"),i.css({position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px",opacity:0}),e?"object"==typeof e?($.extend(a,e),i.addClass(a["class"]),a.text&&i.html("<span>"+a.text+"</span>")):i.html("<span>"+e+"</span>"):i.html("<span class='loader'></span>"),$(t).append(i),i.animate({opacity:1},0),i},EverythingWidgets.prototype.unlock=function(t){var e=$(t).children(".glass-pane-lock:not(.unlock)").last();e.addClass("unlock").animate({opacity:0},0,function(){$(this).remove()})},EWTable.prototype.createHeadersRow=function(t){var e=$(document.createElement("tr")),a=[];return $.each(t,function(t,e){a.push("<th style=width:",e.width,"px;display:",e.display,">",t,"</th>")}),e.append(a.join("")),e},EWTable.prototype.createRow=function(t,e){var a=this,i=$(document.createElement("tr"));i.data("field-id",t.id),i.attr("data-field-id",t.id),a.config.onClick&&i.click(function(){a.config.onClick(i.data("field-id"))}),a.config.ondblClick&&i.dblclick(function(){a.config.ondblClick(i.data("field-id"))});var n=$(document.createElement("td"));if(a.config.onEdit){var s=$(document.createElement("button"));s.attr("type","button"),s.attr("data-label","Edit"),s.addClass("btn btn-text edit"),s.click(function(){EW.activeElement=i,a.config.onEdit.apply(i,new Array(i.data("field-id")))}),n.append(s)}if(a.config.onDelete){var o=$(document.createElement("button"));o.attr("type","button"),o.addClass("btn btn-text delete"),o.click(function(){i.confirm=function(t,e){var n=$("<div class='row-block label label-danger'>");n.append("<span>"+t+"</span>"),i.css({position:"relative"}),n.css({position:"absolute",width:o.outerWidth(),left:o.position().left});var s=$("<button type=button class='btn btn-white'>Delete</button>");n.append(s),s.on("click",function(){e.apply(i,new Array(i.data("field-id")))&&a.removeRow(i.data("field-id"))});var r=$("<button type=button class='btn btn-default btn-text' style='float:right'>Cancel</button>");n.append(r),r.on("click",function(){i.css({position:""}),n.empty(),n.animate({width:o.outerWidth(),left:o.position().left},300,"Power3.easeOut").fadeOut(120,function(){n.remove()})}),$(document).one("keydown",function(t){27==t.keyCode&&r.click()}),i.append(n),n.animate({width:"100%",left:"0px"},300,"Power3.easeOut")},a.config.onDelete.apply(i,new Array(i.data("field-id")))&&i.removeRow(i.data("field-id"))}),n.append(o)}a.config.buttons&&$.each(a.config.buttons,function(t,e){if(e){var s=e.action||e,o=$(document.createElement("button"));o.attr("type","button"),o.addClass("btn btn-text btn-primary"),o.text(e.title||t),o.click(function(){s.apply(a,new Array(i))}),n.append(o)}}),delete t.id;var r=e;if(a.config.rowLabel)var l=a.config.rowLabel.replace(/{(\w+)}/g,function(e,a){return t[a]});if(i.data("label",l),a.config.columns){var c=a.config.columns.join(" "),d=c.replace(/(\w+)/g,function(e,a){return i.data("field-"+e,t[a]),"<td>"+t[a]+"</td>"});$(d).appendTo(i)}else $.each(t,function(t,e){"none"!==a.headers.children().eq(r).css("display")&&(i.data("field-"+t,e),$("<td>"+e+"</td>").appendTo(i)),r++});return n.children().length>0&&i.append(n),i},EWTable.prototype.listRows=function(){var t=this,e=t.token+1,a=new Array;t.config.rowCount?$.each(t.data.result,function(i,n){var s=t.createRow(n,1);s.prepend("<td>"+e+"</td>"),a.push(s),e++}):$.each(t.data.result,function(e,i){var n=t.createRow(i,0);a.push(n)}),t.table.empty(),t.table.append(a)},EWTable.prototype.read=function(t){var e=this;$.EW("lock",e.table);var a=$.extend(e.urlData,{token:e.token,size:e.pageSize},t);$.ajax({type:"POST",url:e.url,data:a,dataType:"json",success:function(t){var a=e.token+e.pageSize;e.token+e.pageSize>t.totalRows?(e.next.css("visibility","hidden"),a=t.totalRows):e.next.css("visibility","visible"),e.token<=0?e.previous.css("visibility","hidden"):e.previous.css("visibility","visible"),e.data=t,e.listRows(),e.dynamicHeader=e.headers.clone(),e.dynamicHeader.addClass("dynamic-header"),e.table.prepend(e.dynamicHeader),e.pageInfo.text(e.token+"-"+a+" of "+t.totalRows)},error:function(t){e.data={result:[]},e.table.empty(),e.next.css("visibility","hidden"),e.previous.css("visibility","hidden"),e.container.replaceWith("<div class='box box-error'><h2>"+t.responseJSON.statusCode+"</h2>"+t.responseJSON.message+"</div>"),EW.customAjaxErrorHandler=!0}})},EWTable.prototype.refresh=function(t){this.read(t)},EWTable.prototype.removeRow=function(t){this.table.find("tr[data-field-id='"+t+"']").remove()},EverythingWidgets.prototype.createTable=function(t){var e=new EWTable(t),a=$(document.createElement("table"));a.addClass("data"),a.attr("id",t.name),e.table=a;var i=$(document.createElement("button"));i.addClass("button next"),i.click(function(t){t.preventDefault(),e.token+=e.pageSize,e.read()}),e.controls.append(i),e.next=i;var n=$(document.createElement("button"));n.addClass("button previous"),n.click(function(t){t.preventDefault(),e.token-=e.pageSize,e.read()}),e.controls.append(n);var s=$(document.createElement("label"));s.css({"float":"right",marginRight:"10px"}),e.controls.append(s),e.pageInfo=s,e.previous=n;var o=e.createHeadersRow(t.headers);t.rowCount&&o.prepend("<th class='no'></th>"),(t.onDelete||t.onEdit||t.buttons)&&o.append("<th class='actions'></th>");var r=$(document.createElement("table"));return r.addClass("data"),r.append(o),e.headers=o,e.tableHeaderDiv.append(r),e.tableBodyDiv.append(a),e.read(),e},EverythingWidgets.prototype.addURLHandler=function(t,e){var a=this.urlHandlers;if(e)customHashes[e]||(customHashes[e]=new HashListener(e)),customHashes[e].addHandler(e,t);else{for(var i=0;i<a.length;i++)if(" "+a[i]==" "+t)return a[i]=null,a[i]=t,void a[i].call();a.push(t),this.urlHandlers=a}return e?customHashes[e].newHandler=!0:this.newHandler=!0,t},EverythingWidgets.prototype.removeURLHandler=function(t,e){var a=this.urlHandlers;customHashes[e]&&(a=customHashes[e].handlers);for(var i=0;i<a.length;i++)" "+a[i]==" "+t&&(a.splice(i,1),i=0)},EverythingWidgets.prototype.createForm=function(t){var e=$("<form></form>");e.addClass("col-xs-12");var a=t;return"object"==typeof a&&$.each(a,function(t,a){var i=$("<div></div>");i.addClass("col-xs-12 col-sm-12 col-md-6 col-lg-4");var n,s;if("hidden"!=a.type&&(n=$("<label></label>"),n.text(a.label),n.attr("for",t)),"select"==a.type){var o=$("<div></div>");o.addClass("text-field"),s=$("<select></select>"),s.attr({id:t,name:t}),o.append(s),"object"==typeof a.defValue&&$.each(a.defValue,function(t,e){var a=$("<option></option>");a.attr("value",t),a.text(e),s.append(a)}),i.append(n),i.append(o),e.append(i)}else"text"==a.type?(s=$("<textarea></textarea>"),s.attr({id:t,name:t}),s.val(a.defValue),i.append(n),i.append(s),e.append(i)):"label"==a.type?(s=$("<label></label>"),s.attr({id:t}),s.text(a.defValue),i.append(n),i.append(s),e.append(i)):"hidden"==a.type?(s=$("<input>"),s.attr({type:a.type,id:t,name:t}),s.val(a.defValue),e.append(s)):a.type?(s=$("<input>"),s.attr({type:a.type,id:t,name:t}),s.val(a.defValue),n.prepend(s),i.html(n),e.append(i)):(s=$("<input>"),s.addClass("text-field"),s.attr({id:t,name:t}),s.val(a.defValue),i.append(n),i.append(s),e.append(i))}),e},EWNotification.prototype.closeNotification=function(){return this.options.onClose(),$(this.$note).remove(),this.options.onClosed(),!1},EWNotification.prototype.show=function(){var t=0,e=0,a=this.options.position,i=this.$note,n=this.$element.find("div[data-alert][data-position='"+this.options.position+"']").last();this.$note.css("opacity","0"),this.$element.append(this.$note),n.length>0&&(("ne"==a||"nw"==a||"n"==a)&&(t=n.outerHeight(!0)+n.offset().top),("se"==a||"sw"==a)&&(t=n.offset().top-i.outerHeight(!0))),this.$element.is("body")||(t=this.$element.offset().top,e=(this.$element.outerWidth()-this.$note.outerWidth())/2+this.$element.offset().left),"n"==a&&(e=($(window).width()-this.$note.outerWidth())/2),this.$note.css({top:t,marginLeft:"+=25",left:e});var s=this;this.$note.stop().animate({marginLeft:"-=25",opacity:"1"},300,function(){"stay"!==s.options.delay&&s.$note.delay(s.options.delay||3e3).fadeOut("slow",$.proxy(s.closeNotification,s))})},EWNotification.prototype.hide=function(){this.$note.delay(this.options.delay||3e3).fadeOut("slow",$.proxy(this.closeNotification,this))},ExtendableList.prototype.createItem=function(){var t=this.firstItemClone.clone(),e=$("<div class='row control'></div>"),a=$("<button type='button' class='close-icon' ></button>");return a.click(function(){t.animate({opacity:0},200),t.animate({height:"toggle"},300,"Power2.easeOut",function(){t.remove()})}),e.append(a),t.prepend(e),this.settings.onNewItem&&this.settings.onNewItem.apply(this,[t]),t};var ew_plugins;$.EW=function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return EW[t]?EW[t].apply(EverythingWidgets.prototype,e):void 0};var globalOptions={};$.fn.EW=function(t){return $.extend(globalOptions,t),$.extend(this,ew_plugins),this},ew_plugins={createDropMenu:function(t){return EW.createDropMenu(this,t)},createView:function(t){var e=$(this).clone();e.wrap("<div>");var a=e.parent().html().replace(/{(\w+)}/g,function(e,a){return t[a]});return $(a)},notify:function(t){return new EWNotification(this,t)},validate:function(t){return EWFormValidator(this,t)},putInWrapper:function(){var t=$(this);t.parent().attr("data-element-wrapper")||t.wrap('<div class="element-wrapper" style="position:relative" data-element-wrapper="true"></div>')},dynamicList:function(t){var e={getJSON:function(){return $(this).find(":input").serializeJSON()}},a={};if(e[t])return e[t].apply(this,Array.prototype.slice.call(arguments,1));var i=$.extend({},a,t);return this.each(function(){$.data(this,"ew-plugin-expandable-list")||$.data(this,"ew-plugin-expandable-list",new ExtendableList(this,i))})},inputButton:function(t){function e(t,e){var i=$(t);if("INPUT"===i.prop("tagName").toUpperCase()||"TEXTAREA"===i.prop("tagName").toUpperCase()){var n=$.extend({},a,e);i.parent().attr("data-element-wrapper")||i.EW().putInWrapper();var s,o=i.parent(),r=o.find(".buttons-panel"),l=!1;if(i.attr("data-active-plugin-input-button")){if($.each(r.find("button"),function(t,e){$(e).html()==n.title&&(l=$(e))}),l)return void l.click(function(){EW.activeElement=l,n.onClick(i)});s=$("<button type='button' class='btn btn-xs' style='min-width:24px;'>"+n.title+"</button>"),s.addClass(n["class"]),s.attr("id",n.id),s.css({"float":"right"}),r.append(s)}else r=$("<div class='buttons-panel'>"),r.css({position:"absolute"}),s=$("<button type='button' class='btn btn-xs' style='min-width:24px;'>"+n.title+"</button>"),s.addClass(n["class"]),s.attr("id",n.id),s.css({"float":"right"}),n.label&&s.attr("data-label",n.label),r.prepend(s),o.prepend(r),r.css({right:i.css("padding-right")}),i.attr("data-active-plugin-input-button",!0),i.css("padding-right",r.outerWidth()+2*parseInt(i.css("padding-right")));s.click(function(){EW.activeElement=s,n.onClick(i)})}}var a={onClick:function(){},title:"button","class":"btn-primary",id:""};return this.each(function(){$.data(this,"ew_plugin_input_button",new e(this,t))})}},EverythingWidgets.prototype.initPlugins=function(t){t.is("input")?(t.attr("dir","auto"),t.is("[data-ew-plugin='link-chooser']")&&t.EW().linkChooser(),t.is("[data-label]")&&t.floatlabel(),t.is('[data-ew-plugin="image-chooser"]')&&t.EW().imageChooser(),t.is("[data-slider]")&&t.simpleSlider()):(t.find("input, textarea").attr("dir","auto"),t.find('input[data-ew-plugin="link-chooser"], textarea[data-ew-plugin="link-chooser"]').EW().linkChooser(),t.find("input[data-label], textarea[data-label], select[data-label]").floatlabel(),t.find('[data-ew-plugin="image-chooser"]').EW().imageChooser(),t.find("[data-slider]").simpleSlider())};var EW;$(document).ready(function(){EW=new EverythingWidgets;var t=null;EW.addURLHandler(function(){var e=EW.getHashParameter("ew_activity");if(e&&e!=t){var a={closeHash:{},onOpen:function(){var t=this;EW.lock(this);var a=EW.getHashParameters();EW.activities[e].postData&&("function"==typeof EW.activities[e].postData?$.extend(a,EW.activities[e].postData()):$.extend(a,EW.activities[e].postData)),$.ajax({type:"POST",url:EW.activities[e].url,data:a,success:function(e){t.html(e)},error:function(e){console.log(e),t.html(e.responseText),e.responseJSON&&alert(e.responseJSON.message),EW.customAjaxErrorHandler=!0
}})},onClose:function(){var t={ew_activity:null};EW.activities[e].onDone&&("function"==typeof EW.activities[e].onDone?EW.activities[e].onDone(t):$.extend(t,EW.activities[e].onDone)),$(document).trigger(e+".close",t),$.extend(t,a.closeHash),EW.setHashParameters(t)}};EW.activities[e]?($(document).trigger(e+".open",a),$.extend(a,EW.activities[e].modal),EW.activities[e].modalObject=EW.createModal(a)):(alert("Activity not found: "+e),EW.setHashParameters({ew_activity:null})),t=e}else t!=e&&(t&&EW.activities[t].modalObject&&EW.activities[t].modalObject.trigger("close"),t=e)}),EW.addURLHandler(function(){var t=EW.getHashParameter("ew_activity","FORMLESS_ACTIVITY");if(t)if(EW.activities[t]){$(document).trigger(t+".call",EW.activities[t]);var e=EW.getHashParameters("FORMLESS_ACTIVITY");if(EW.activities[t].postData&&(e="function"==typeof EW.activities[t].postData?EW.activities[t].postData.apply(EW.activities[t]):EW.activities[t].postData),!e)return void EW.setHashParameters({ew_activity:null},"FORMLESS_ACTIVITY");$.post(EW.activities[t].url,e,function(e){EW.activities[t].onDone&&EW.activities[t].onDone.apply(EW.activities[t],[e]),$(document).trigger(t+".done",e)},"json")}else alert("Formless activity not found");EW.setHashParameters({ew_activity:null},"FORMLESS_ACTIVITY")},"FORMLESS_ACTIVITY")});